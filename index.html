<canvas id='canvas'></canvas>
<script src="https://unpkg.com/mathjs@7.0.0/dist/math.min.js" type="text/javascript"></script>
<script src="drawing.js"></script>
<script src="agent.js"></script>

<script type="text/javascript">

	var env = new Environment()
	var agent = new Agent(env)

	window.onload = function(){	

		env.conf.forEach(v => env.drawBlock(v))
		

		function update() {
			if(agent.commands.length > 0){
				[func, arg] = agent.commands.shift()
				agent.run(func, arg)
			}
		}

		function draw() {
			if(env.lastInserted != null)
				env.drawBlock(env.conf[env.lastInserted])
				// env.conf.forEach(v => env.drawBlock(v))
		}

		function loop() {

		  update();
		  draw();

		  window.requestAnimationFrame(loop);
		}

		window.requestAnimationFrame(loop);


	}
	


</script>
<script src="code.js"></script>