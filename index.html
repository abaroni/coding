<canvas id='canvas'></canvas>
<script src="https://unpkg.com/mathjs@7.0.0/dist/math.min.js" type="text/javascript"></script>
<script src="drawing.js"></script>
<script src="agent.js"></script>
<script src="code.js"></script>
<script type="module" src="workspace.js"></script>
<script type="text/javascript">

	window.onload = function(){	
		

		function update() {
			if(agent.commands.length > 0){
				[func, arg] = agent.commands.shift()
				agent.run(func, arg)
			}
		}

		function draw() {
			if(env.lastInserted != null){	
				env.conf.slice(env.lastInserted, env.conf.length).forEach(drawBlock)
			}
		}

		function loop() {

		  update();
		  draw();

		  window.requestAnimationFrame(loop);
		}

		window.requestAnimationFrame(loop);


	}
	


</script>